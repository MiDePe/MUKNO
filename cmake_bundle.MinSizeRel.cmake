include(BundleUtilities)

set(ApplicationList "MuknoPlanner")
set(LookupDirectories "C:/thesis/SDK-gris/x64/release/qcustomplot-1.3.2/bin;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/gmp/lib/;C:/thesis/build/x64/release/MUKNO2-gris/MinSizeRel/bin/;C:/thesis/SDK-gris/x64/release/GrisFramework-0.6.2/bin;C:/thesis/SDK-gris/x64/release/GrisFramework-0.6.2/bin;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/GDCM/bin;C:/thesis/SDK-gris/x64/release/GDCM/bin;C:/thesis/SDK-gris/x64/release/GDCM/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/qt-5.7/5.7/msvc2015_64/bin;C:/thesis/SDK-gris/x64/release/qt-5.7/5.7/msvc2015_64/bin;C:/thesis/SDK-gris/x64/release/qt-5.7/5.7/msvc2015_64/bin;C:/thesis/SDK-gris/x64/release/qt-5.7/5.7/msvc2015_64/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/VTK-7.1.1/bin;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/boost_1_59_0/lib64-msvc-14.0;C:/thesis/SDK-gris/x64/release/ACVD_vtk-7.1.1/lib/cmake/ACVD/../../../bin;C:/thesis/SDK-gris/x64/release/ACVD_vtk-7.1.1/lib/cmake/ACVD/../../../bin;C:/thesis/SDK-gris/x64/release/ACVD_vtk-7.1.1/lib/cmake/ACVD/../../../bin;C:/thesis/SDK-gris/x64/release/ACVD_vtk-7.1.1/lib/cmake/ACVD/../../../bin;C:/thesis/SDK-gris/x64/release/qt-5.7/5.7/msvc2015_64/bin" "")

list(REMOVE_DUPLICATES LookupDirectories)


set(MuknoPlanner_file "C:/thesis/build/x64/release/MUKNO2-gris/MinSizeRel/bin/MuknoPlanner.exe")


foreach(app IN LISTS ApplicationList)
  if(NOT DEFINED ${app}_dynamic_libs)
    set(${app}_dynamic_libs "")
  endif()
  fixup_bundle("${${app}_file}" "${${app}_dynamic_libs}" "${LookupDirectories}")
  get_filename_component(TARGET_DIRECTORY "${${app}_file}" PATH)
  get_bundle_and_executable("${${app}_file}" bundle executable valid)

  # copy pdbs, if they exist
  IF(valid)
    get_bundle_keys("${${app}_file}" "${${app}_dynamic_libs}" "${LookupDirectories}" keys)
    FOREACH(key ${keys})
      IF(${key}_RESOLVED_ITEM MATCHES "\\.[Dd][Ll][Ll]$")
        string(LENGTH ${key}_RESOLVED_ITEM length)
        MATH(EXPR length "${length} - 4")
        string(SUBSTRING "${${key}_RESOLVED_ITEM}" 0 ${length} filename)
        SET(filename "${filename}.pdb")
        IF(EXISTS "${filename}")
          FILE(COPY ${filename} DESTINATION ${TARGET_DIRECTORY})
        ENDIF()
      ENDIF()
    ENDFOREACH()
  ENDIF(valid)
endforeach()
